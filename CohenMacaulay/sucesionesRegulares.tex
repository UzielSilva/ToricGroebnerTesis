\section{Sucesiones regulares y complejos de Koszul}

Una definición muy importante para poder trabajar, es la de \emph{sucesión regular}, ya que extiende la noción de un elemento que no es divisor de cero. A lo largo de esta sección a estos elementos les llamaremos \emph{regulares}

\begin{definition}

Sea $R$ anillo y $M$ $R$-módulo. Una sucesión de elementos $x_1,\dots,x_n \in R$ es una \emph{sucesión regular} en $M$ (o una $M$-sucesión) sí:

\begin{enumerate}[i)]
\item $(x_1,\dots,x_n)M \neq M$
\item $(\forall i \in \{1,\dots, n\})(x_i \textrm{ es regular en } M/(x_1,\dots, x_{i-1}))$
\end{enumerate}

\end{definition}

Estudiaremos esta noción con una herramienta homológica llamada \emph{complejo de Koszul}. Su definición es algo complicada, por lo que primero trataremos de entender los casos más simples para después generalizar.

Antes de continuar, necesitaremos un par de definiciones.

\begin{definition}

Un \emph{complejo de cadenas de $R$-módulos} (o simplemente \emph{complejo}) $C^{\bullet}$ es una sucesión de módulos $\{C^i\}_{i \in \mathbb{Z}}$ y funciones $\{d^i: C^{i-1}\rightarrow C^i\}_{i \in \mathbb{Z}}$ tal que, para toda $i \in \mathbb{Z}$, $d^{i+1} \circ d^i = 0$. En ocasiones a estas funciones se les denomina como diferenciales.

Nos referimos al kernel de $d^n$ como $Z^n(C^\bullet)$, y a su imagen como $B^n(C^\bullet)$.

La \emph{homología} $H^i$ de este complejo en $C^i$ es el módulo:

$$ \ker(d^{i+1})/\textrm{im}(d^{i})$$

\end{definition}

Un complejo, en efecto, puede usar índices finitos, si lo completamos con módulos cero y morfismos cero.

Es de notar que la enumeración y el indexado en la literatura se manejan de derecha a izquierda y con subíndices en lugar de superíndices, pero por conveniencia nosotros usaremos esta notación, que se usa más frecuentemente para hablar de la cohomología.

Para hablar de la homología de los complejos de Koszul, la siguiente definición nos será de mucha utilidad.

\begin{definition}

Si $M$ es un submódulo de un $S$-módulo libre, y $J$ es un ideal de $S$, podemos definir a los siguientes submódulos:

$$(M:J) := \{f \in F|fJ\subset M\}\subset F$$

$$(M:J^\infty) := \bigcup_{d=1}^\infty(M:J^d)\subset F$$

Al submódulo $(M:J^\infty)$ se le conoce como la \emph{saturación de $M$ con respecto a $J$}. Podemos abusar de la notación y escribir $(x:y)$ en lugar de $((x):(y))$.

\end{definition}

Nótese que gracias a esta definición es muy sencillo representar a los divisores de cero de un ideal $A$, que de hecho son un $R$-módulo. Basta con representarlos como $(0:A)$.

También, cuando estudiamos relaciones entre complejos es inevitable encontrarnos en algún momento con diagramas conmutativos, lo que nos lleva a las siguientes definiciones.

\begin{definition}

Un \emph{morfismo de cadenas} entre dos complejos $F^{\bullet}$ y $G^{\bullet}$ es una sucesión de homomorfismos de módulos $\{f^{\bullet} = {f^i:F^i \rightarrow G^i}\}_{i \in \mathbb{Z}}$ tal que, para cada $i \in \mathbb{Z}$, el siguiente diagrama conmuta:

\[
\begin{tikzcd}
F^{i-1} \arrow[d,"d^i"] \arrow[r,"f^{i-1}"] & G^{i-1} \arrow[d,"d^i"]\\
F^i \arrow[r,"f^i"] & G^i
\end{tikzcd}
\]

Utilizamos el mismo símbolo $d^i$ para referirnos a los diferenciales correspondientes de cada complejo.

\end{definition}

\begin{definition}

Una \emph{sucesión exacta de complejos}

$$ \cdots \rightarrow C^{\bullet}_{i-1} \xrightarrow{f^{\bullet}_i} C^{\bullet}_i \xrightarrow{f^{\bullet}_{i+1}} C^{\bullet}_{i+1} \rightarrow \cdots$$

Es una sucesión de morfismos de cadenas $\{f^{\bullet}_i:C^{\bullet}_{i-1}\rightarrow C^{\bullet}_i\}_{i \in \mathbb{Z}}$ tales que, para cada $j\in \mathbb{Z}$, la sucesión de homomorfismos de módulos

$$ \cdots \rightarrow C^{j}_{i-1} \xrightarrow{f^j_i} C^{j}_i \xrightarrow{f^j_{i+1}} C^{j}_{i+1} \rightarrow \cdots$$

es exacta. También se le denomina \emph{sucesión exacta corta} a una sucesión exacta que consta de sólamente dos morfismos $f^\bullet:C\rightarrow D$, $g^\bullet:D\rightarrow E$ consecutivos distintos de cero, representándose de la siguente manera:

$$ 0 \rightarrow C^{\bullet} \xrightarrow{f^{\bullet}} D^{\bullet} \xrightarrow{g^{\bullet}} E^{\bullet} \rightarrow 0$$

\end{definition}

\subsection{Complejos de Koszul de longitud 1 y 2}

Podemos decidir si un elemento $x \in R$ es regular a través de la homología del complejo

$$ K(x):0\rightarrow R\xrightarrow{x} R $$

la cual resulta ser $(0:x)$. Esta sencilla observación es la base para nuestro estudio de las sucesiones regulares a través de la homología.

Dado un segundo elemento $y \in R$, la multiplicación por $y$ define una función entre complejos $K(x)\rightarrow K(x)$, es decir, un diagrama conmutativo

\[
\begin{tikzcd}
K(x):0 \arrow[r,""] & R \arrow[r,"x"] \arrow[d,"y"] & R \arrow[d,"y"]\\
K(x):0 \arrow[r,""] & R \arrow[r,"x"] & R
\end{tikzcd}
\]

Podemos usar la conmutatividad del cuadrado en el diagrama para construir un complejo más grande, el cual lo representamos esquemáticamente de la siguiente manera

\[
K(x,y):
\begin{tikzcd}
0\arrow[r,""] & R \arrow[r,"x"] \arrow[rd,"y"] & R \arrow[d,draw=none,"\bigoplus" description] \arrow[r,""] \arrow[rd,"y"] & 0\\
&0 \arrow[r,""] & R \arrow[r,"-x"] & R \arrow[r] & 0
\end{tikzcd} \label{complex2schema} \tag{$\star$}
\]

o en una notación más usual como 

\[
K(x,y):
\begin{tikzcd}[ampersand replacement=\&]
0 \ar[r] \& R \ar{r}{
\left( \begin{smallmatrix} y \\ x \end{smallmatrix} \right)
} \& R \oplus R \ar{r}{
\left( \begin{smallmatrix} -x & y \end{smallmatrix} \right)
} \& R
\end{tikzcd} \label{complex2common} \tag{$\star\star$}
\]

En la literatura se suele definir de otra forma al complejo de Koszul, usualmente se representa con los signos de la siguiente manera

\[
K(x,y):
\begin{tikzcd}[ampersand replacement=\&]
0 \ar[r] \& R \ar{r}{
\left( \begin{smallmatrix} y \\ -x \end{smallmatrix} \right)
} \& R \oplus R \ar{r}{
\left( \begin{smallmatrix} x & y \end{smallmatrix} \right)
} \& R
\end{tikzcd}
\]

Estas dos posibilidades de representarlo, sin embargo, son isomorfas como complejos, por lo que no representa un problema. Nosotros elegiremos la primera forma por conveniencia para cálculos que analizaremos más adelante.

Podemos ver de la definición que $H^0(K(x)) = (0:x)$, el anulador de $x$, y $H^0(K(x,y))$ es $(0, (x,y))$, así que si $x$ es regular entonces $H^0(K(x,y)) = 0$.

Ahora analizemos qué es $H^1(K(x,y))$. Primero analicemos el kernel de la función de la derecha. Un elemento $(a,b) \in R\oplus R$ está en el kernel sí y sólo si $-xa+yb = 0$, por lo que $b \in (x:y)$. De igual manera, si $b \in (x:y)$, entonces hay un elemento $a$ tal que $-xa + yb = 0$, así que $(a,b)$ estará en el kernel. Si asumimos que $x$ es regular, entonces $a$ está únicamente determinada por $b$, y la asociación $b\rightarrow a$ es un homomorfismo de módulos, así que el kernel es isomorfo a $(x:y)$.
Por otro lado, un elemento está en la imagen de la función de la derecha sí y sólo si es de la forma $(cy, cx)$, así que los elementos de $(x:y)$ que corresponden a los elementos de la imagen son los elementos de $(x)$. Así, si $x$ es regular, entonces

$$H^1(K(x,y))\cong(x:y)/(x)$$

En particular, si $x$ es regular entonces $H^1(K(x,y)) = 0$ sí y sólo si la sucesión $x, y$ satisface la condición (II) en la definición de sucesión regular.

Aún podemos extraer más información si dirigimos nuestra atención al diagrama (\ref{complex2schema}): La fila de abajo es un subcomplejo(es decir, sus diferenciales no se salen de él) isomorfo a $K(x)$, mientras que la fila de arriba, también isomorfa a $K(x)$, es el cociente de $K(x, y)$ por la fila de abajo. En efecto, el $i-1$-ésimo termino del subcomplejo $K(x)$ está incluído en el $i$-ésimo térmido de $K(x, y)$, el cual proyecta hacia el $i$-ésimo término del cociente $K(x)$, por lo que tenemos la siguiente sucesión exacta corta:

$$ 0 \rightarrow K_1(x) \xrightarrow{i^\bullet} K(x,y) \xrightarrow{p^\bullet} K_2(x) \rightarrow 0 $$

Además, un famoso lema llamado el \emph{"lema de la serpiente"} establece que es posible obtener una sucesión exacta larga de homologías a partir de una sucesión exacta corta de complejos, redefiniendo a los morfismos $f^i:C^i\rightarrow D^i$ como $H(f^i):H^i(C^{\bullet})\rightarrow H^i(D^{\bullet}), H(f^i)(x + B^i(C^\bullet)) = f^i(x) + B^i(D^\bullet)$ (el lema también garantiza que estos nuevos morfismos están bien definidos), así que esta sucesión exacta larga obtenida tiene la forma:

$$\cdots \rightarrow H^0(K_2(x)) \xrightarrow{\delta} H^0(K_1(x)) \rightarrow H^1(K(x, y)) \rightarrow H^1(K_2(x)) \rightarrow \cdots$$

donde la función $\delta$ es el "homomorfismo que conecta". Para explicar este homomorfismo nos apoyaremos en el siguiente diagrama, cuyas columnas representan a $K_1(x), K(x, y)$ y $K_2(x)$, respectivamente:

\[
\begin{tikzcd}[ampersand replacement=\&]
\&\& 0 \ar{d} \& 0 \ar{d} \\
\&0 \ar{r} \ar{d} \& R \ar{r}{p^0} \ar{d}{
\left( \begin{smallmatrix} y \\ x \end{smallmatrix} \right)
} \& R \ar{d}{x} \ar{r} \& 0 \\
0 \ar{r} \&R \ar{r}{i^1} \ar{d}{-x} \& R \oplus R \ar{r}{p^1} \ar{d}{
\left( \begin{smallmatrix} -x & y \end{smallmatrix} \right)
} \& R \ar{d} \ar{r} \& 0 \\
0 \ar{r} \&R \ar{r}{i^2} \ar{d} \& R \ar{r}{p^2} \ar{d} \& R \ar{r} \ar{d} \& 0 \\
\& 0 \& 0 \& 0 
\end{tikzcd}
\]

Donde $i^1(z) = \left(\begin{smallmatrix} z \\ 0 \end{smallmatrix} \right)$, $p_1$ es la proyección de la segunda coordenada, y $p^0, i^2, p^2$ son $id_{R}$. Ahora, sea $z \in H^0(K_2(x))$. Para obtener su imagen a través de $\delta$, debemos tomar su preimagen a través de $H(p^0)$, que es el mismo $z$, y luego aplicar a un representante de la clase el diferencial. En este caso la imagen es trivial y sólo tenemos un representante, así que obtendremos $\left(\begin{smallmatrix} yz \\ xz \end{smallmatrix}\right)$. Pero recordemos que $z \in Z^0(K_2(x))$, así que $z \in (0:x)$ y $\left(\begin{smallmatrix} yz \\ xz \end{smallmatrix}\right)=\left(\begin{smallmatrix} yz \\ 0 \end{smallmatrix}\right)$, que pertenece al kernel de $p^1$, así que, como $H(i^1)$ y  $H(p^1)$ forman una sucesión exacta, tomemos la preimagen de $\left(\begin{smallmatrix} yz \\ 0 \end{smallmatrix}\right) + B^1(K(x,y))$ a través de $H(i^0)$, que es $yz$, siendo finalmente la imagen de $\delta$, por lo tanto, $\delta(z) = yz$.

Ahora supongamos solamente que $H^1(K(x, y)) = 0$. Se sigue de la sucesión exacta de homologías que:

$$H^0(K(x))/yH^0(K(x)) = 0$$

En general, esto no nos dice mucho, pero si suponemos además que $R$ es un anillo noetheriano local y $y$ está en el ideal maximal, entonces, por el lema de Nakayama(falta hablar de esto) tenemos que $H^0(K(x)) = 0$. Por ende, $x$ es regular, y $x, y$ forman una sucesión regular por lo visto anteriormente. Enunciaremos lo discutido anteriormente en el siguiente teorema.

\begin{theorem}
Si $R$ es un anillo noetheriano local, y $x, y$ están en el ideal maximal, entonces $x, y$ forman una sucesión regular sí y sólo si $H^1(K(x, y)) = 0$.
\end{theorem}\label{regular-homology}

Por la manera en la que definimos al complejo de Koszul en (\ref{complex2common}), es claro que los complejos $K(x, y)$ y $K(y, x)$ son isomorfos. Así que, bajo la hipótesis del teorema anterior, $x, y$ es una sucesión regular sí y sólo si $y, x$ lo es. Esto es suficiente para mostrar que las sucesiones regulares permiten permutaciones.

\begin{corollary}
Si $R$ es un anillo noetheriano local, y $x_1, \dots, x_r$ es una sucesión regular de elementos en el ideal maximal de $R$, entonces cualquier permutación de $x_1, \dots, x_r$ es sucesión regular.
\end{corollary}

\begin{proof}
Como toda permutación es producto de transposiciones de elementos vecinos, basta con probar que el corolario se cumple cuando transponemos dos elementos vecinos; es decir, si $x_1,\dots, x_i, x_{i+1}, \dots, x_r$ es una sucesión regular, entonces $x_1,\dots, x_{i+1}, x_i, \dots, x_r$ también lo es. Para esto basta con probar que $x_{i+1}, x_i$ es sucesión regular módulo $(x_1,\dots, x_{i-1})$, pero gracias a la propiedad (II) de la definición de sucesión regular, $x_i, x_{i+1}$ es una sucesión regular módulo $(x_1,\dots, x_{i-1})$, y gracias al teorema \ref{regular-homology} la sucesión permutada es regular.
\end{proof}

A primera impresión podemos pensar que la hipótesis de anillo local en estos dos resultados está de más, pero no es el caso.

\begin{example}
Consideremos el anillo

$$R = K[x,y,z]/(x-1)z$$

y la sucesión de elementos 

$$x, (x-1)y.$$

El ideal que generan es $(x, (x-1)y) = (x,y) \neq R$. Más aún, es fácil de ver que $x$ es regular en $R$, y $R/(x) = K[x,y]/(z)$. Así, $x, (x-1)y$ forman una sucesión regular, y

$$H^1(K(x, (x-1)y)) = 0$$

Sin embargo, $(x-1)y$ es un divisor de cero(se anula al multiplicarse con $z$), así que la sucesión en orden inverso no es regular.
\end{example}
Algo importante de destacar es lo siguiente: Si $x \in R$ es arbitrario, entonces $H^0(K(x, 0)) = H^0(K(x))$(ya que ambos son isomorfos a $(0:(x))$) incluso si el complejo $K(x, 0)$ no es isomorfo a $K(x)$.